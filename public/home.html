<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MealMate - Browse</title>
    <!-- for icons  -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release-pro/v4.0.0/css/line.css">

    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


    <!-- swiper -->
    <!-- <link rel="stylesheet" href="assets/css/swiper-bundle.min.css"> -->

    <!-- fancy box  -->
    <link rel="stylesheet" href="assets/css/jquery.fancybox.min.css">
    <!-- custom css  -->
    <link rel="stylesheet" href="style.css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Vue CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Lottie Player -->
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>

    <script type="module" src="./database.js"></script>
    <style>
        .main-navigation {
            display: flex;
            justify-content: flex-end;
        }

        .menu-toggle {
            position: relative;
            width: 40px;
            height: 40px;
            background: transparent;
            border: none;
            display: none;
            outline: none !important;
            box-shadow: inset 6px 6px 7px #dadada, -6px -6px 10px #ffffff;
            border-radius: 10px;
            padding: 0 8px;
        }

        .menu-toggle span {
            display: block;
            width: 100%;
            height: 4px;
            background: #ff8243;
            margin-bottom: 5px;
            border-radius: 5px;
            transition: 0.3s;
        }

        .menu-toggle span:last-child {
            margin: 0;
        }

        .toggled .menu-toggle span:nth-child(1) {
            transform: rotate(45deg);
            top: 5px;
            position: relative;
        }

        .toggled .menu-toggle span:nth-child(2) {
            transform: rotate(-45deg);
            top: -4px;
            position: relative;
        }

        @media (max-width: 991px) {
            .menu-toggle {
                display: block;
                z-index: 100;
            }

            .header-menu {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: #f3f3f5;
                padding-top: 90px;
                padding-left: 30px;
                transform: translateY(-100%);
                transition: 0.5s ease;
            }

            .main-navigation.toggled .header-menu {
                transform: translateY(0);
            }

            .main-navigation .menu li {
                display: block;
                margin-bottom: 20px;
            }

            .main-navigation .menu li a {
                display: inline-block;
                font-size: 18px;
            }
        }

        @media (max-width: 767px) {
            .dish-box {
                margin: 80px 15px 30px;
                /* Add some horizontal margin */
            }

            .dist-bottom-row {
                padding: 0 15px;
                /* Add padding to the bottom row */
            }

            .dist-bottom-row ul {
                flex-wrap: wrap;
                /* Allow items to wrap */
                gap: 10px;
                /* Add space between wrapped items */
            }

            .dist-bottom-row ul li {
                width: 100%;
                /* Make each item take full width */
                justify-content: space-between;
                align-items: center;
            }

            .dish-add-btn {
                min-width: 120px;
                /* Ensure minimum width for the button */
                height: auto;
                /* Allow height to adjust */
                padding: 8px 12px;
                /* Add more padding */
                white-space: nowrap;
                /* Prevent text wrapping */
                /* margin: 0px; */
            }

            .dist-bottom-row ul li b {
                font-size: 22px;
                /* Slightly reduce font size */
            }

            /* Adjust padding for price and info sections */
            .dish-info,
            .dish-title {
                padding: 0 15px;
            }
        }

        @media (max-width: 375px) {
            .dish-box {
                padding-bottom: 30px;
            }

            .dist-bottom-row ul {
                flex-direction: column;
                align-items: center;
            }

            .dist-bottom-row ul li {
                margin-bottom: 10px;
            }
        }

        .sec-sub-title {
            font-size: 2rem !important;
            font-weight: 500 !important;
            text-transform: uppercase;
            color: #FF7747;
            background: #f3f3f5;
            display: inline-block;
            padding: 15px 45px;
            border-radius: 60px;
            box-shadow: 9px 9px 12px #e4e4e4, -9px -9px 12px #ffffff;
        }



        .faq-sec .sec-sub-title {
            font-size: 2rem !important;
            font-weight: 500 !important;
            text-transform: uppercase;
            color: #FF7747;
            background: #f3f3f5;
            display: inline-block;
            padding: 15px 45px;
            border-radius: 60px;
            box-shadow: 9px 9px 12px #e4e4e4, -9px -9px 12px #ffffff;
        }

        .center-col {
            display: flex;
            /* align-items: center; */
            justify-content: center;
        }

        .center-col-menu {
            display: flex;
            /* align-items: center; */
            justify-content: center;
        }

        .sec-sub-title {
            font-size: 2rem !important;
            font-weight: 500 !important;
            text-transform: uppercase;
            color: #FF7747;
            background: #f3f3f5;
            display: inline-block;
            padding: 15px 45px;
            border-radius: 60px;
            box-shadow: 9px 9px 12px #e4e4e4, -9px -9px 12px #ffffff;
        }


        .status-popup {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            z-index: 1000;
        }

        .status-popup.success {
            background-color: #4CAF50;
        }

        .status-popup.error {
            background-color: #f44336;
        }

        .status-popup.show {
            opacity: 1;
        }

        .dish-box {
            border-radius: 12px;
            background: linear-gradient(145deg, #ececec, #ffffff);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            min-height: 120px;
            width: 100%;
            /* Make it take full width of parent */
            max-width: 400px;
            /* Maximum width */
            display: flex;
            align-items: center;
            padding: 1rem;
            gap: 1rem;
            margin: 0;
        }

        .dish-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .dish-box img {
            transition: transform 0.3s ease;
        }

        .dish-box:hover img {
            transform: scale(1.05);
        }

        /* Responsive grid adjustments */
        @media (min-width: 1400px) {
            .center-col-menu {
                width: 33.333%;
                /* 3 cards per row on large screens */
            }
        }

        @media (min-width: 992px) and (max-width: 1399px) {
            .center-col-menu {
                width: 50%;
                /* 2 cards per row on medium screens */
            }

            .dish-box {
                max-width: 450px;
                /* Slightly larger on medium screens */
            }
        }

        @media (min-width: 768px) and (max-width: 991px) {
            .center-col-menu {
                width: 100%;
                /* 1 card per row on smaller screens */
            }

            .dish-box {
                max-width: 600px;
                /* Larger width on smaller screens */
            }
        }

        @media (max-width: 767px) {
            .center-col-menu {
                width: 100%;
                padding: 0.25rem;
            }

            .dish-box {
                min-height: 100px;
                max-width: 100%;
                padding: 0.75rem;
                gap: 0.75rem;
            }

            .dish-box .flex-shrink-0 {
                width: 80px;
                height: 80px;
            }

            .featured-title {
                font-size: 1rem;
            }

            .featured-info {
                font-size: 0.85rem;
            }
        }

        /* Also update your responsive grid container */
        .row.g-xxl-5.bydefault_show {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -0.5rem;
            /* Compensate for column padding */
            width: 100%;
        }

        #cart-button {
            position: fixed;
            z-index: 9999;
            pointer-events: auto;
        }

        .cart-btn-drag {
            touch-action: none;
            user-select: none;
        }

        .cart-item-count-container {
            position: absolute;
            top: -8px;
            right: -8px;
        }

        .cart-item-count {
            background-color: #f44336;
            color: white;
            font-size: 12px;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 50%;
        }
    </style>

</head>

<body class="body-fixed">
    <!-- start of header  -->
    <header class="site-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-2">
                    <div class="header-logo">
                        <a href="index.html">
                            <img src="./images/mealmate-logo-zip-file/png/logo-no-background.png" width="160"
                                alt="Logo">
                        </a>
                    </div>
                </div>
                <div class="col-lg-10">
                    <div class="main-navigation">
                        <button class="menu-toggle"><span></span><span></span></button>
                        <nav class="header-menu">
                            <ul class="menu food-nav-menu">
                                <li><a href="./orderhistory.html" id="orderHistory" class="nav-link">Orders</a></li>
                                <li><a href="javascript:void(0)" id="contactLink">Contact</a></li>
                                <li><a href="./index.html" id="logout" class="nav-link">Log Out</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header ends  -->

    <div id="viewport">
        <div id="js-scroll-content">

            <section class="main-banner" id="home" style="padding-top: 100px; margin-bottom: 10px;">
                <div class="js-parallax-scene">
                    <div class="banner-shape-1 w-100" data-depth="0.30">
                        <img src="assets/images/berry.png" alt="">
                    </div>
                    <div class="banner-shape-2 w-100" data-depth="0.25">
                        <img src="assets/images/berry.png" alt="">
                    </div>
                </div>
                <div class="sec-wp">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="banner-text">
                                    <h1 class="h1-title mb-0">
                                        See what's
                                        <span>cookin</span> today
                                    </h1>
                                    <!-- <div class="banner-img-text m-0">
                                        <h5 class="h5-title">Waste Less. Save More.</h5>
                                    </div> -->
                                    <!-- <p class="uil uil-location-point">
                                        Customer's current location
                                    </p> -->
                                    <!-- <div class="banner-btn mt-4">
                                        <a href="#menu" class="sec-btn">Check our Menu</a>
                                    </div> -->

                                </div>
                            </div>
                            <div class="col-lg-6">
                                <!-- <div class="banner-img-text">
                                    <h5 class="h5-title">Waste Less. Save More.</h5>
                                </div> -->
                                <!-- <p class="uil uil-location-point">
                                    Customer's current location
                                </p> -->
                                <div class="banner-img-wp" style="height: 300px; padding-top: 20px;">
                                    <!-- <div class="banner-img" style="background-image: url(assets/images/main-b.jpg);">
                                    </div> -->
                                    <div class="banner-img"
                                        style="background-image: url(assets/images/pax-food-section-d.png);">
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="col-lg-6">
                                <div class="banner-img-wp" style="height: 200px;">
                                    <div class="banner-img" style="background-image: url(images/66594dd0493476bf35d63bb4_Snip20240531_48.webp);">
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
            </section>

            <section id="featured-businesses" class="section pt-3 pb-3 bg-light repeat-img"
                style="background-image: url(assets/images/menu-bg.png);">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="sec-title text-center mb-0">
                                <h2 class="h2-title mb-0">Top-rated Businesses</h2>
                                <div class="sec-title-shape mb-3">
                                    <img src="assets/images/title-shape.svg" alt="">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="horizontal-scroll-container">
                        <button class="scroll-arrow prev-arrow">
                            <i class="fas fa-chevron-left"></i>
                        </button>

                        <div class="business-scroll-wrapper">
                            <div id="featured-cards" class="business-cards"></div>
                        </div>

                        <button class="scroll-arrow next-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </section>

            <section style="background-image: url(assets/images/menu-bg.png);"
                class="our-menu section bg-light repeat-img py-3" id="menu">
                <div class="sec-wp">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="sec-title text-center mb-0">
                                    <!-- <p class="sec-sub-title mb-3">All businesses</p> -->
                                    <h2 class="h2-title mb-0">All Businesses</span></h2>
                                    <div class="sec-title-shape mb-3">
                                        <img src="assets/images/title-shape.svg" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- selector end -->
                        <div class="menu-list-row">
                            <div class="row g-xxl-5 bydefault_show justify-content-center" id="menu-dish">

                            </div>
                        </div>

                    </div>

                </div>

            </section>
            <section style="background-image: url(assets/images/menu-bg.png);" class="section bg-light repeat-img py-3">
                <div id="reviews-container" style="display:none;" class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="sec-title text-center mb-5">
                                <p class="sec-sub-title mb-3">Reviews</p>
                                <h2 id="review-subheader" class="h2-title" ">Click on a business to discover<span>what others think</span></h2>
                                    <div class=" sec-title-shape mb-4">
                                    <img src="assets/images/title-shape.svg" alt="">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="reviews" style="display:none;">

                </div>
            </section>
            <!-- <div id="reviews"></div> -->
            <section class="faq-sec section-repeat-img p-5" style="background-image: url(assets/images/faq-bg.png);">
                <div class="sec-wp">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="sec-title text-center mb-5">
                                    <p class="sec-sub-title mb-3">faqs</p>
                                    <h2 class="h2-title">Frequently <span>asked questions</span></h2>
                                    <div class="sec-title-shape mb-4">
                                        <img src="assets/images/title-shape.svg" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-row">
                            <div class="faq-box">
                                <h4 class="h4-title">How does MealMate work?</h4>
                                <p>MealMate connects you with local businesses offering discounted food that would
                                    otherwise go to waste. Browse available meals, place your order, and pick up during
                                    the specified time window.</p>
                            </div>
                            <div class="faq-box">
                                <h4 class="h4-title">Is the food safe to eat?</h4>
                                <p>Yes! All food offered through MealMate is perfectly safe for consumption. These are
                                    fresh, unsold items that businesses need to sell by the end of their business day
                                    due to inventory management.</p>
                            </div>
                            <div class="faq-box">
                                <h4 class="h4-title">Can I see what's available before ordering?</h4>
                                <p>Yes! Businesses list their available items with descriptions, photos, original
                                    prices, and discounted prices so you know exactly what you're getting.</p>
                            </div>
                            <div class="faq-box">
                                <h4 class="h4-title">How do I pay for my order?</h4>
                                <p>Reserve your meal on MealMate, then pay directly at the business when you collect
                                    your order within the specified pickup window.</p>
                            </div>
                            <div class="faq-box">
                                <h4 class="h4-title">What if I miss my pickup window?</h4>
                                <p>Orders not picked up during the specified window will be cancelled due to the
                                    time-sensitive nature of our deals. Please contact the business if you're running
                                    late.</p>
                            </div>
                            <div class="faq-box">
                                <h4 class="h4-title">Are there any membership fees to use MealMate?</h4>
                                <p>No! MealMate is completely free to use. You only pay for the discounted food items
                                    you purchase, with no hidden fees.</p>
                            </div>
                        </div>

                    </div>
                </div>

            </section>


            <div class="bg-pattern bg-light repeat-img"
                style="background-image: url(assets/images/blog-pattern-bg.png);">

                <section class="newsletter-sec section py-4">
                    <div class="sec-wp">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-8 m-auto">
                                    <div class="newsletter-box text-center back-img white-text"
                                        style="background-image: url(assets/images/news.jpg);">
                                        <div class="bg-overlay dark-overlay"></div>
                                        <div class="sec-wp">
                                            <div class="newsletter-box-text">
                                                <h2 class="h2-title">Subscribe our newsletter</h2>

                                            </div>
                                            <form action="#" class="newsletter-form">
                                                <input type="email" class="form-input"
                                                    placeholder="Enter your Email Here" required>
                                                <button type="submit" class="sec-btn primary-btn">Submit</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- footer starts  -->
            <footer class="site-footer" id="contact">
                <div class="top-footer section">
                    <div class="sec-wp">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="footer-info">
                                        <div class="footer-logo">
                                            <a href="index.html">
                                                <img src="images/mealmate-logo-zip-file/png/logo-no-background.png"  style="width: 200px;">
                                            </a>
                                        </div>
                                        <p>Connect with us on our socials!
                                        </p>
                                        <div class="social-icon">
                                            <ul>
                                                <li>
                                                    <a href="#">
                                                        <i class="uil uil-facebook-f"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="#">
                                                        <i class="uil uil-instagram"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="#">
                                                        <i class="uil uil-github-alt"></i>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="#">
                                                        <i class="uil uil-youtube"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-8">
                                    <div class="footer-flex-box">
                                        <!-- <div class="footer-table-info">
                                            <h3 class="h3-title">open hours</h3>
                                            <ul>
                                                <li><i class="uil uil-clock"></i> Mon-Thurs : 9am - 22pm</li>
                                                <li><i class="uil uil-clock"></i> Fri-Sun : 11am - 22pm</li>
                                            </ul>
                                        </div> -->
                                        <div class="footer-menu food-nav-menu">
                                            <h3 class="h3-title">Links</h3>
                                            <ul class="column-2">
                                                <li>
                                                    <a href="#home" class="footer-active-menu">Home</a>
                                                </li>
                                                <li><a href="#contact">Contact</a></li>
                                            </ul>
                                        </div>
                                        <div class="footer-menu">
                                            <h3 class="h3-title">Company</h3>
                                            <ul>
                                                <li><a href="#">Terms & Conditions</a></li>
                                                <li><a href="#">Privacy Policy</a></li>
                                                <li><a href="#">Cookie Policy</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bottom-footer">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 text-center">
                                <div class="copyright-text">
                                    <p>Copyright &copy; 2024 <span class="name">MealMate.</span>All Rights Reserved.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <button class="scrolltop"><i class="uil uil-angle-up"></i></button>
                    </div>
                </div>
            </footer>



        </div>
    </div>

    <div id="cart-button"></div>



    <!-- jquery  -->
    <script src="assets/js/jquery-3.5.1.min.js"></script>
    <!-- bootstrap -->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/popper.min.js"></script>

    <!-- fontawesome  -->
    <script src="assets/js/font-awesome.min.js"></script>

    <!-- swiper slider  -->
    <!-- <script src="assets/js/swiper-bundle.min.js"></script> -->

    <!-- mixitup -- filter  -->
    <script src="assets/js/jquery.mixitup.min.js"></script>

    <!-- fancy box  -->
    <script src="assets/js/jquery.fancybox.min.js"></script>

    <!-- parallax  -->
    <script src="assets/js/parallax.min.js"></script>

    <!-- gsap  -->
    <script src="assets/js/gsap.min.js"></script>

    <!-- scroll trigger  -->
    <script src="assets/js/ScrollTrigger.min.js"></script>
    <!-- scroll to plugin  -->
    <script src="assets/js/ScrollToPlugin.min.js"></script>
    <!-- rellax  -->
    <!-- <script src="assets/js/rellax.min.js"></script> -->
    <!-- <script src="assets/js/rellax-custom.js"></script> -->
    <!-- smooth scroll  -->
    <script src="assets/js/smooth-scroll-complete.js"></script>
    <!-- custom js  -->
    <script src="main.js"></script>
    <!-- userHome.js -->
    <script type="module" src="./userHome.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const menuToggle = document.querySelector('.menu-toggle');
            const mainNav = document.querySelector('.main-navigation');

            menuToggle.addEventListener('click', function () {
                mainNav.classList.toggle('toggled');
            });

            // Close menu when clicking a link
            document.querySelectorAll('.header-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mainNav.classList.remove('toggled');
                });
            });
        });

        // initialize parallax
        document.addEventListener("DOMContentLoaded", function () {
            var scene = document.querySelector('.js-parallax-scene');
            if (scene) {
                var parallaxInstance = new Parallax(scene, {
                    relativeInput: true,
                    clipRelativeInput: false,
                    hoverOnly: false,
                    selector: '.banner-shape-1, .banner-shape-2'
                });
            }
        });

        document.addEventListener('DOMContentLoaded', function () {
            // Check if GSAP is loaded
            if (typeof gsap !== 'undefined') {
                gsap.registerPlugin(ScrollTrigger);

                var elementFirst = document.querySelector('.site-header');
                if (elementFirst) {
                    ScrollTrigger.create({
                        trigger: "body",
                        start: "30px top",
                        end: "bottom bottom",
                        onEnter: () => elementFirst.classList.add('sticky_head'),
                        onLeaveBack: () => elementFirst.classList.remove('sticky_head'),
                    });
                } else {
                    console.error('Header element not found');
                }
            } else {
                console.error('GSAP is not loaded');
            }
        });
    </script>

    
    <script>
 const { createApp } = Vue;

createApp({
  data() {
    return {
      position: {
        // Store position as percentages instead of pixels
        rightPercent: 5, // 5% from right
        bottomPercent: 5  // 5% from bottom
      },
      isDragging: false,
      hover: false,
      cartItemCount: 0,
      startX: 0,
      startY: 0,
      initialX: 0,
      initialY: 0
    }
  },
  computed: {
    buttonStyle() {
      return {
        position: 'fixed',
        right: `${this.position.rightPercent}%`,
        bottom: `${this.position.bottomPercent}%`,
        cursor: this.isDragging ? 'grabbing' : 'grab',
        zIndex: 1000,
        userSelect: 'none',
        touchAction: 'none',
        transform: 'translate3d(0,0,0)',
        willChange: this.isDragging ? 'right, bottom' : 'auto'
      }
    }
  },
  methods: {
    startDrag(event) {
      if (event.button !== 0) return;
      
      this.isDragging = true;
      this.startX = event.clientX;
      this.startY = event.clientY;
      
      // Store initial percentages
      this.initialX = this.position.rightPercent;
      this.initialY = this.position.bottomPercent;
      
      event.preventDefault();
    },

    handleDrag(event) {
      if (!this.isDragging) return;
      
      const dx = this.startX - event.clientX;
      const dy = this.startY - event.clientY;
      
      // Convert pixel changes to percentage changes
      const rightChange = (dx / window.innerWidth) * 100;
      const bottomChange = (dy / window.innerHeight) * 100;
      
      // Update percentages
      let newRight = this.initialX + rightChange;
      let newBottom = this.initialY + bottomChange;
      
      // Constrain to window bounds (keep button visible)
      newRight = Math.max(0, Math.min(95, newRight));
      newBottom = Math.max(0, Math.min(95, newBottom));
      
      this.position.rightPercent = newRight;
      this.position.bottomPercent = newBottom;
    },

    stopDrag(event) {
      if (!this.isDragging) return;
      
      const dx = Math.abs(event.clientX - this.startX);
      const dy = Math.abs(event.clientY - this.startY);
      
      if (dx < 5 && dy < 5) {
        this.handleCartClick();
      }
      
      this.isDragging = false;
    },

    handleCartClick() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const businessUEN = JSON.parse(localStorage.getItem('businessId') || '""');
      const businessName = JSON.parse(localStorage.getItem('businessName') || '""');
      
      if (cart.length > 0) {
        localStorage.setItem("businessId", JSON.stringify(businessUEN));
        localStorage.setItem("cart", JSON.stringify(cart));
        localStorage.setItem("businessName", JSON.stringify(businessName));
        localStorage.removeItem("currentOrderId");
        localStorage.removeItem("orderCreationTime");
        window.location.href = "cart.html";
      } else {
        this.showStatusPopup(
          "Your cart is empty. Please add items to the cart before ordering.",
          false
        );
      }
    },

    showStatusPopup(message, isSuccess) {
      const existingPopup = document.querySelector(".status-popup");
      if (existingPopup) {
        existingPopup.remove();
      }

      const popup = document.createElement("div");
      popup.className = `status-popup ${isSuccess ? "success" : "error"}`;
      popup.textContent = message;
      document.body.appendChild(popup);
      popup.offsetHeight;

      setTimeout(() => popup.classList.add("show"), 10);
      setTimeout(() => {
        popup.classList.remove("show");
        setTimeout(() => popup.remove(), 300);
      }, 3000);
    },

    updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      this.cartItemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
    }
  },
  mounted() {
    document.addEventListener('mousemove', this.handleDrag);
    document.addEventListener('mouseup', this.stopDrag);
    window.addEventListener('cartUpdated', (event) => {
      this.cartItemCount = event.detail.count;
    });
    this.updateCartCount();
  },
  unmounted() {
    document.removeEventListener('mousemove', this.handleDrag);
    document.removeEventListener('mouseup', this.stopDrag);
    window.removeEventListener('cartUpdated', this.updateCartCount);
  },
  template: `
    <div 
      class="cart-btn-drag"
      @mousedown="startDrag"
      :style="buttonStyle"
    >
      <div
        :style="{
          width: '56px',
          height: '56px',
          backgroundColor: hover ? '#ea580c' : '#f97316',
          borderRadius: '50%',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',
          transition: isDragging ? 'none' : 'background-color 0.2s',
          position: 'relative'
        }"
        @mouseover="hover = true"
        @mouseleave="hover = false"
      >
        <div v-if="cartItemCount > 0" 
          :style="{
            position: 'absolute',
            top: '-8px',
            right: '-8px',
            backgroundColor: '#ef4444',
            color: 'white',
            borderRadius: '50%',
            width: '24px',
            height: '24px',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontSize: '12px',
            fontWeight: 'bold',
            pointerEvents: 'none',
            zIndex: 2
          }"
        >
          {{ cartItemCount }}
        </div>
        <div :style="{
          position: 'absolute',
          top: '-52px',
          left: '-42px',
          pointerEvents: 'none',
          zIndex: 1
        }">
          <dotlottie-player 
            src="https://lottie.host/ee74d4ab-339d-460d-9964-15d15f21053d/seHndu7YQT.json" 
            background="transparent" 
            speed="1" 
            style="width: 140px; height: 140px" 
            direction="1" 
            playMode="normal" 
            loop 
            autoplay
          ></dotlottie-player>
        </div>
      </div>
    </div>
  `
}).mount('#cart-button');
    </script>

</body>

</html>